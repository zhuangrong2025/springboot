define("#/observer/0.1.4/observer",[],function(t,r,n){function e(t){return"[object String]"===Object.prototype.toString.call(t)}function o(t){return"[object Function]"===Object.prototype.toString.call(t)}function a(t){return"[object Array]"===Object.prototype.toString.call(t)}function c(t){return"[object RegExp]"===Object.prototype.toString.call(t)}function i(t,r,n){n?v[t]=r[t]:delete v[t]}function l(t,r,n){if(!(t||e(t)||c(t)||a(t)))throw"输入的参数必须是字符串或字符串数组";a(t)||(t=[t]);var o=[];for(var l in n)o.push(l);for(var f=0,u=t.length;u>f;f++){var s=t[f];if(!e(s)&&!c(s))throw"输入的参数的数组元素必须是字符串或正则表达式";if(c(s))for(var g=0,v=o.length;v>g;g++){var h=o[g];s.test(h)&&i(h,n,r)}else s in n&&i(s,n,r)}}function f(t,r,n,e){for(var o=t.slice(0),a=0,c=o.length;c>a;a++){var i=o[a];i.callback.apply(i.context||r,n),e&&s.log(i.stack)}}function u(){var t=new Error;if(t.stack){var r=3,e=t.stack.split("\n");"    at Error (<anonymous>)"===e[1]&&r++;var o=arguments.callee.caller.caller;(o===n.exports.once||o===n.exports.past)&&r++;var a=e[r];return a}}var s,g={},v={};if(window.console)s=window.console;else{var h=function(){};s={log:h,warn:h,error:h}}var b=seajs.debug&&!window.ActiveXObject,p=Array.prototype.indexOf?function(t,r){return t.indexOf(r)}:function(t,r){for(var n=0,e=t.length;e>n;n++)if(t[n]===r)return n;return-1};n.exports={on:function(t,r,n){if(!e(t)||!o(r))throw"必须传入正确的name和callback参数";var a=g[t]||(g[t]=[]),c={callback:r,context:n||this};if(b){c.stack=u();for(var i=0,l=a.length;l>i;i++){a[i]}}return a.push(c),this},once:function(t,r,n){if(!e(t)||!o(r))throw"必须传入正确的name和callback参数";var a=this,c=function(){a.off(t,c),r.apply(n||a,arguments)};return c.callback=r,this.on(t,c),this},off:function(t,r,n){if(!(t||r||n))throw"必须传入name, callback, context等参数";if(!t||!e(t))throw"必须传入正确的name参数";if(r&&!o(r))throw"必须传入正确的callback参数";var a=g[t];if(!a)return this;if(!r&&!n)return delete g[t],this;for(var c=a.length-1;c>=0;c--){var i=a[c];(i.callback===r||i.callback.callback===r)&&(n&&i.context!==n||a.splice(c,1))}return this},offAll:function(){return g={},this},past:function(t,r,n){if(!e(t)||!o(r))throw"必须传入正确的name和callback参数";return v[t]&&r.apply(n||this,v[t]),this.on(t,r,n),this},trigger:function(t){if(!e(t))throw"必须传入正确的name参数";for(var r=[],n=1,o=arguments.length;o>n;n++)r.push(arguments[n]);v[t]=r;var a,c=window.ObserverDebugOut;if(b&&c&&(a="*"===c,a=a||c===t,a=a||p(c,t)>=0),a){var i=u();s.log("--------------- trigger: ["+t+"] begin ---------------"),s.log(i),s.log("on event")}var l=g[t];l&&f(l,this,r,a);var h=g.all;return a&&h&&s.log("on all"),h&&f(h,this,r,a),a&&(s.log("--------------- trigger: ["+t+"] end -----------------"),s.log(""),s.log("")),this},clearAll:function(){v={}},clear:function(t){var r=v;l(t,!1,r)},clearOther:function(t){var r=v;v={},l(t,!0,r)},_getLastArgs:function(){return v},_getSubscribers:function(){return g}},b&&(window.printObserver=function(){var t="";for(var r in g){t+="on ["+r+"]\n";for(var n=g[r],e=0,o=n.length;o>e;e++)t+="    "+n[e].stack+"\n";t+="\n"}s.log(t)})},{});